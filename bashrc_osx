export ANDROID_SDK_ROOT=/usr/local/Cellar/android-sdk/r20

# Setting PATH for Python 2.7
#PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
#PATH="/usr/local/sbin:${PATH}"
#PATH="~/Library/Python/2.7/bin:${PATH}"
#export PYTHONPATH=/usr/local/lib/python2.7/site-packages:$PYTHONPATH
export PYTHONPATH=/Users/mark/Library/Python/2.7/lib/python/site-packages:$PYTHONPATH

#Colorized less using pygmentize
export LESS='-R -F -X'
#export LESSOPEN='|pygmentize -g %s'
#export LESS='-F -X'

# Deleted files with go to Trash instead of being deleted immediately.
function rm () {
  local path
  for path in "$@"; do
    # ignore any arguments
    if [[ "$path" = -* ]]; then :
    else
      local dst=${path##*/}
      # append the time if necessary
      while [ -e ~/.Trash/"$dst" ]; do
        dst="$dst "$(date +%H-%M-%S)
      done
      mv "$path" ~/.Trash/"$dst"
    fi
  done
}

# Recursively delete `.DS_Store` files
alias rmds="find . -type f -name '*.DS_Store' -ls -delete"

# Empty the Trash on all mounted volumes and the main HDD
# Also, clear Apple’s System Logs to improve shell startup speed
alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl"

# Enable aliases to be sudo’ed
alias sudo='sudo '

# enable cliboard support in vim by using the app from MacVim
#alias vi='/Applications/MacVim.app/Contents/MacOS/Vim'

# Create thumbnail from QL preview
function thumb() {
    target=$1
    filename=`basename $1`
    image="${TMPDIR}${filename}.png"
    rsrc="${TMPDIR}icn.rsrc"
    # Create a thumbnail from the file preview
    qlmanage -t -s 512 -o ${TMPDIR} $target
    # apply the image to itself as an thumbnail icon
    sips -i $image
    # Extract the icon resource
    DeRez -only icns $image > $rsrc
    # Make the target accept a custom icon
    SetFile -a C $target
    # Apply the icon resource to the target
    Rez -append $rsrc -o $target
    # clean up
    rm $rsrc $image
}

# List files with specified Finder tags in current directory
# Works with partial words starting from the beginning of the word
lst() {
	# if the first argument is "AND" (case insensitive),
	# a boolean AND search will be used. Defaults to OR.
	bool="OR"
	[[ $1 =~ "and" ]] && bool="AND" && shift
 
	first=true
	for tag in $@; do
		if $first; then
			query="tag:$tag"
			first=false
		else
			query="$query $bool tag:$tag"
		fi
	done
 
	results=$(mdfind -onlyin . "$query")
	for line in $results; do
		echo ${line#`pwd`/} # make result paths relative to pwd
	done
}

#iTerm Tab Colors
tab-color() {
    echo -ne "\033]6;1;bg;red;brightness;$1\a"
    echo -ne "\033]6;1;bg;green;brightness;$2\a"
    echo -ne "\033]6;1;bg;blue;brightness;$3\a"
}
tab-reset() {
    echo -ne "\033]6;1;bg;*;default\a"
}

# Change the color of the tab when using SSH
# reset the color after the connection closes
color-ssh() {
    if [[ -n "$ITERM_SESSION_ID" ]]; then
        trap "tab-reset" INT EXIT
        if [[ "$*" =~ "101" ]]; then
            #tab-color 170 0 255
            tab-color 204 171 216
        else
          tab-color 187 217 109 
        fi
    fi
    ssh $*
    # Reset tab color on exit SSH session
    tab-reset
}

# Quickly get image dimensions from the command line
function imgsize() {
        local width height
        if [[ -f $1 ]]; then
                height=$(sips -g pixelHeight "$1"|tail -n 1|awk '{print $2}')
                width=$(sips -g pixelWidth "$1"|tail -n 1|awk '{print $2}')
                echo "W: ${width} x H:${height}"
                echo "<img href=${1} width=${width} height=${height}>"
        else
                echo "File not found"
        fi
}
 
alias ssh=color-ssh
